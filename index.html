<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>HVAC Service</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --vz-red:#E4002B;     /* Verizon red */
      --vz-black:#000000;
      --vz-tan:#F5F1E6;     /* soft tan background */
      --ink-1:#0B0B0B;
      --ink-2:#3A3A3A;
      --ink-muted:#6B7280;
      --card:#FFFFFF;
      --border:#E5E7EB;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: var(--vz-tan); color: var(--ink-1);
    }
    .wrap{max-width:960px;margin:0 auto;padding:32px 16px}
    header{
      background: var(--vz-black); color:white; padding:28px 16px; border-bottom:4px solid var(--vz-red);
    }
    header .title{max-width:960px;margin:0 auto;display:flex;align-items:center;gap:12px}
    .dot{width:14px;height:14px;border-radius:50%;background:var(--vz-red)}
    h1{font-size:1.75rem;margin:0}
    .subtle{color:var(--ink-2)}
    .chip{
      display:inline-flex;align-items:center;gap:8px;
      padding:6px 10px;border:1px solid var(--border);border-radius:999px;
      background:#fff; color:var(--ink-2); font-weight:600;
    }
    main{margin-top:28px}
    .grid{
      display:grid; gap:16px; grid-template-columns:1fr; margin-top:16px;
    }
    @media(min-width:700px){ .grid{ grid-template-columns:1fr 1fr; } }
    .card{
      background: var(--card); border:1px solid var(--border); border-radius:14px; padding:18px;
      box-shadow: 0 1px 0 rgba(0,0,0,.04);
    }
    .card h2{margin:.25rem 0 .5rem; font-size:1.15rem}
    .btn{
      display:inline-block; margin-top:12px; padding:12px 16px; border-radius:10px;
      background: var(--vz-red); color:white; text-decoration:none; font-weight:700;
      border:2px solid var(--vz-red);
    }
    .btn.outline{
      background:transparent; color: var(--vz-red);
    }
    .notice{
      margin-top:14px; color:#B91C1C; font-weight:600;
    }
    footer{margin:40px 0 24px; color:var(--ink-muted); font-size:.9rem}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>HVAC Service</h1>
    <div id="unitChip" class="id-chip" hidden></div>
    <p class="subtle">Choose what you need for this specific unit.</p>

    <div class="cards">
      <div class="card">
        <h2>Forms</h2>
        <p class="subtle">Open the service form pre-filled with this unit’s ID.</p>
        <a id="formLink" class="btn" href="#" target="_blank" rel="noopener">Open Service Form</a>
      </div>
      <div class="card">
        <h2>History</h2>
        <p class="subtle">View this unit’s service history and past submissions.</p>
        <a id="historyLink" class="btn" href="#" target="_blank" rel="noopener">View History</a>
      </div>
    </div>

    <div id="warn" class="warning" hidden>Missing or unknown unit ID. Scan the correct QR code.</div>
  </div>

  <script>
    // 1) Read unit_id from URL (?id=AC-001)
    const params = new URLSearchParams(location.search);
    const unitId = (params.get('id') || '').trim();

    // Optional: validate against a known list (prevents typos)
    const KNOWN_UNITS = [
      "8A","8B","4A","4B","9B","7B","9A","CAC-1","CAC-2","PORTABLE 480V",
      "CRAC-7A","AHU-16","OFFICE HVAC","1A","1B","16","20","17","AHU-20","AHU-18",
      "AHU-2","OAHU","6A","4D","AHU-17","AHU-15","AHU-6B","AHU-14","AHU-6A","AHU-7C",
      "AHU-1A","AHU-5A","AHU-10B","AHU-8B"
    ];

    function isValidUnit(id) { return KNOWN_UNITS.includes(id); }

    const unitChip = document.getElementById('unitChip');
    const warn = document.getElementById('warn');
    const formLink = document.getElementById('formLink');
    const historyLink = document.getElementById('historyLink');

    if (!unitId || !isValidUnit(unitId)) {
      warn.hidden = false;
    } else {
      unitChip.textContent = `Unit: ${unitId}`;
      unitChip.hidden = false;

      // 2) Build links that carry the unit_id forward

      // -------- Option A: Google Forms prefill --------
      // Replace FORM_ID and entry.123456 with your actual IDs (see steps below)
      const googleFormBase = "https://docs.google.com/forms/d/e/1FAIpQLSdH5Ix8iNe3ZUc60hm5OjD-Q_Kpzb5WsFMKB7hg0Pf9qBIubA/viewform";
      const unitEntryKey = "entry.2099728163"; // <-- change to your Unit ID question's entry key
      const formUrl = `${googleFormBase}?usp=pp_url&${unitEntryKey}=${encodeURIComponent(unitId)}`;

      // -------- History link options --------
      // (i) Link to your own /history page that reads ?id=
      const historyUrl = `https://docs.google.com/spreadsheets/d/1-X5bHu5OJGfyzY9_2ocEiS36SVTrE0qva4DM5xGroqU/edit?gid=2126108334#gid=2126108334`;

      // (ii) Or link to a dashboard/report that accepts a parameter (e.g., Looker Studio)
      // const historyUrl = `https://lookerstudio.google.com/reporting/REPORT_ID/page/PAGE?params={"unit_id":"${encodeURIComponent(unitId)}"}`;

      formLink.href = formUrl;
      historyLink.href = historyUrl;
    }
  </script>
</body>
</html>


